<div class="resenas-container">
  <h2>Reseñas</h2>

  <!-- Formulario -->
  <div class="agregar-resena">
    <h3>Agregar Nueva Reseña</h3>
    <form (ngSubmit)="agregarResena()" #resenaForm="ngForm">
      <div class="form-group">
        <input 
          type="text" 
          placeholder="Título de la reseña"
          name="titulo" 
          [(ngModel)]="nuevaResena.titulo" 
          required
        >
      </div>

      <div class="form-group">
        <textarea 
          placeholder="Escribe tu reseña aquí..."
          name="contenido" 
          [(ngModel)]="nuevaResena.contenido" 
          required
          rows="4"
        ></textarea>
      </div>

      <div class="form-group">
        <label>Calificación: {{ nuevaResena.calificacion }}/5</label>
        <input 
          type="range" 
          name="calificacion" 
          [(ngModel)]="nuevaResena.calificacion" 
          min="1" 
          max="5" 
          required
        >
        <div class="estrellas-preview">
          {{ '★'.repeat(nuevaResena.calificacion) }}{{ '☆'.repeat(5 - nuevaResena.calificacion) }}
        </div>
      </div>

      <button type="submit" [disabled]="!resenaForm.valid || cargando">
        {{ cargando ? 'Agregando...' : 'Agregar Reseña' }}
      </button>
    </form>
  </div>

  <!-- Lista de reseñas -->
  <div class="lista-resenas">
    <h3>Reseñas Existentes ({{ resenas.length }})</h3>

    <div *ngIf="resenas.length === 0" class="sin-resenas">
      <p>No hay reseñas aún. ¡Sé el primero en agregar una!</p>
    </div>

    <div *ngFor="let resena of resenas" class="resena-card">
      <div class="resena-header">
        <h4>{{ resena.titulo }}</h4>
        <button 
          (click)="eliminarResena(resena.id)" 
          class="btn-eliminar"
        >
          ×
        </button>
      </div>
      <div class="calificacion">
        {{ '★'.repeat(resena.calificacion) }}{{ '☆'.repeat(5 - resena.calificacion) }}
        ({{ resena.calificacion }}/5)
      </div>
      <p class="contenido">{{ resena.contenido }}</p>
      <div class="fecha">
        {{ resena.fecha_creacion | date:'medium' }}
      </div>
    </div>
  </div>
</div>