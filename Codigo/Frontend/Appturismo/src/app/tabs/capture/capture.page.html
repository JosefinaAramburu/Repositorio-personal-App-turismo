<ion-header>
  <ion-toolbar color="primary">
    <ion-title>游깴 Explorar Lugares</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="explore-content">
  <!-- Hero Section con buscador -->
  <div class="hero-section">
    <div class="hero-overlay">
      <h1>Descubr칤 el Mundo</h1>
      <p>Encontr치 los mejores lugares para visitar</p>
    </div>
  </div>

  <!-- Buscador destacado -->
  <div class="search-container">
    <ion-searchbar 
      [(ngModel)]="terminoBusqueda"
      (ionInput)="filtrarLugares()"
      placeholder="游댌 Buscar ciudad, pa칤s o lugar... Ej: Barcelona, Par칤s, Tokio"
      animated
      class="hero-searchbar">
    </ion-searchbar>
  </div>

  <!-- Mensaje de ubicaci칩n actual -->
  <div *ngIf="!terminoBusqueda" class="location-banner">
    <ion-icon name="location" color="primary"></ion-icon>
    <span>Mostrando lugares cerca de tu ubicaci칩n actual: <strong>Barcelona</strong></span>
  </div>

  <!-- Lugares filtrados -->
  <div *ngIf="lugaresFiltrados.length > 0" class="results-section">
    <ion-card-header>
      <ion-card-title>Resultados para "{{terminoBusqueda}}"</ion-card-title>
      <ion-card-subtitle>{{lugaresFiltrados.length}} lugares encontrados</ion-card-subtitle>
    </ion-card-header>

    <ion-list lines="none">
      <ion-card 
        *ngFor="let lugar of lugaresFiltrados"
        (click)="irAResenas(lugar)"
        class="lugar-card featured-card"
      >
        <div class="card-image" [style.backgroundImage]="'url(' + lugar.imagen + ')'">
          <div class="card-badge">{{lugar.categoria}}</div>
          <div class="card-overlay"></div>
        </div>
        
        <ion-card-header>
          <ion-card-title>{{ lugar.nombre }}</ion-card-title>
          <ion-card-subtitle>
            <ion-icon name="location-outline"></ion-icon>
            {{ lugar.ciudad }}, {{ lugar.pais }}
          </ion-card-subtitle>
        </ion-card-header>

        <ion-card-content>
          <p class="descripcion">{{ lugar.descripcion }}</p>
          
          <div class="lugar-info">
            <div class="info-item">
              <ion-icon name="time-outline"></ion-icon>
              <span>{{ lugar.horario }}</span>
            </div>
            <div class="info-item" *ngIf="lugar.precio">
              <ion-icon name="pricetag-outline"></ion-icon>
              <span>{{ lugar.precio }}</span>
            </div>
            <div class="info-item" *ngIf="lugar.rating">
              <ion-icon name="star" color="warning"></ion-icon>
              <span>{{ lugar.rating }}/5</span>
            </div>
          </div>

          <ion-button expand="block" color="primary" class="ver-resenas-btn">
            <ion-icon name="chatbubble-ellipses-outline" slot="start"></ion-icon>
            Ver Rese침as
          </ion-button>
        </ion-card-content>
      </ion-card>
    </ion-list>
  </div>

  <!-- Lugares populares (solo sin b칰squeda) -->
  <div *ngIf="!terminoBusqueda" class="popular-section">
    <ion-card-header>
      <ion-card-title>游끥 Lugares Populares en Barcelona</ion-card-title>
      <ion-card-subtitle>Basado en tu ubicaci칩n actual</ion-card-subtitle>
    </ion-card-header>

    <div class="popular-grid">
      <ion-card 
        *ngFor="let lugar of lugaresPopulares"
        (click)="seleccionarLugar(lugar.nombre)"
        class="popular-card"
      >
        <div class="popular-image" [style.backgroundImage]="'url(' + lugar.imagen + ')'"></div>
        <ion-card-content>
          <h3>{{lugar.nombre}}</h3>
          <p>{{lugar.ciudad}}</p>
          <ion-badge color="primary">{{lugar.categoria}}</ion-badge>
        </ion-card-content>
      </ion-card>
    </div>
  </div>

  <!-- Sin resultados -->
  <div *ngIf="lugaresFiltrados.length === 0 && terminoBusqueda" class="no-results">
    <div class="no-results-content">
      <ion-icon name="search-outline" color="medium"></ion-icon>
      <h3>No encontramos lugares para "{{terminoBusqueda}}"</h3>
      <p>Prob치 con otro destino o explor치 los lugares populares</p>
      <ion-button fill="outline" (click)="terminoBusqueda = ''; lugaresFiltrados = []">
        Ver todos los lugares
      </ion-button>
    </div>
  </div>
</ion-content>