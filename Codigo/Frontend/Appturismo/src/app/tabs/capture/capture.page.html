<ion-content>
  <!-- Formulario para agregar/editar lugar -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>
        {{ lugarEditando ? 'Editar Lugar' : 'Agregar Nuevo Lugar' }}
      </ion-card-title>
    </ion-card-header>

    <ion-card-content>
      <ion-item>
        <ion-label position="stacked">Nombre *</ion-label>
        <ion-input 
          [ngModel]="lugarEditando ? lugarEditando.nombre : nuevoLugar.nombre"
          (ngModelChange)="lugarEditando ? lugarEditando.nombre = $event : nuevoLugar.nombre = $event"
          placeholder="Nombre del lugar">
        </ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="stacked">Categoría *</ion-label>
        <ion-input 
          [ngModel]="lugarEditando ? lugarEditando.categoria : nuevoLugar.categoria"
          (ngModelChange)="lugarEditando ? lugarEditando.categoria = $event : nuevoLugar.categoria = $event"
          placeholder="Ej: Restaurante, Hotel, etc.">
        </ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="stacked">Descripción</ion-label>
        <ion-textarea 
          [ngModel]="lugarEditando ? lugarEditando.descripcion : nuevoLugar.descripcion"
          (ngModelChange)="lugarEditando ? lugarEditando.descripcion = $event : nuevoLugar.descripcion = $event"
          placeholder="Descripción del lugar">
        </ion-textarea>
      </ion-item>

      <ion-item>
        <ion-label position="stacked">Horario</ion-label>
        <ion-input 
          [ngModel]="lugarEditando ? lugarEditando.horario : nuevoLugar.horario"
          (ngModelChange)="lugarEditando ? lugarEditando.horario = $event : nuevoLugar.horario = $event"
          placeholder="Ej: 9:00 - 18:00">
        </ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="stacked">Precio</ion-label>
        <ion-input 
          [ngModel]="lugarEditando ? lugarEditando.precio : nuevoLugar.precio"
          (ngModelChange)="lugarEditando ? lugarEditando.precio = $event : nuevoLugar.precio = $event"
          placeholder="Ej: $, $$, $$$">
        </ion-input>
      </ion-item>

      <div class="buttons-container">
        <ion-button *ngIf="!lugarEditando" expand="block" (click)="crearLugar()" 
                   [disabled]="!nuevoLugar.nombre || !nuevoLugar.categoria">
          {{ lugarEditando ? 'Actualizar Lugar' : 'Agregar Lugar' }}
        </ion-button>
        
        <div *ngIf="lugarEditando" class="edit-buttons">
          <ion-button expand="block" (click)="guardarEdicion()">
            Guardar Cambios
          </ion-button>
          <ion-button expand="block" fill="outline" (click)="cancelarEdicion()">
            Cancelar
          </ion-button>
        </div>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- Lista de lugares (más simple) -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>Mis Lugares ({{ lugares.length }})</ion-card-title>
    </ion-card-header>

    <ion-card-content>
      <ion-list>
        <ion-item *ngFor="let lugar of lugares">
          <ion-label>
            <h2>{{ lugar.nombre }}</h2>
            <p><strong>Categoría:</strong> {{ lugar.categoria }}</p>
            <p>{{ lugar.descripcion }}</p>
            <p><strong>Horario:</strong> {{ lugar.horario }}</p>
            <p><strong>Precio:</strong> {{ lugar.precio }}</p>
          </ion-label>
          <div class="action-buttons">
            <ion-button fill="clear" color="warning" (click)="editarLugar(lugar)">
              Editar
            </ion-button>
            <ion-button fill="clear" color="danger" (click)="eliminarLugar(lugar.id_lugares!)">
              Eliminar
            </ion-button>
          </div>
        </ion-item>
      </ion-list>

      <ion-button expand="block" (click)="cargarLugares()">
        Recargar Lugares
      </ion-button>
    </ion-card-content>
  </ion-card>
</ion-content>